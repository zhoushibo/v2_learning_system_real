# ğŸ“ V2 å­¦ä¹ ç³»ç»Ÿé›†æˆçŸ¥è¯†åº“ä½¿ç”¨æŒ‡å—

**é›†æˆæ—¶é—´ï¼š** 2026-02-18  
**ç‰ˆæœ¬ï¼š** v0.3.0 - å­¦ä¹  + å­˜å‚¨ä¸€ä½“åŒ–

---

## ğŸš€ **æ ¸å¿ƒåŠŸèƒ½**

### **1. å­¦ä¹ å®Œæˆè‡ªåŠ¨ä¿å­˜**
V2 å­¦ä¹ ç³»ç»Ÿå­¦ä¹ å®Œæˆåï¼Œ**è‡ªåŠ¨**å°†çŸ¥è¯†ä¿å­˜åˆ°çŸ¥è¯†åº“ç³»ç»Ÿï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œï¼

### **2. åŒç´¢å¼•å­˜å‚¨**
- **ChromaDB** - è¯­ä¹‰æœç´¢ï¼ˆç†è§£æ„å›¾ï¼‰
- **FTS5** - å…³é”®è¯æœç´¢ï¼ˆç²¾ç¡®åŒ¹é… + é«˜äº®ï¼‰

### **3. ç»Ÿä¸€ Gateway æ¶æ„**
æ‰€æœ‰ API è°ƒç”¨é€šè¿‡ç»Ÿä¸€ Gatewayï¼Œè‡ªåŠ¨ä½¿ç”¨ 6 ä¸ª Providerã€‚

---

## ğŸ“– **ä½¿ç”¨æ–¹æ³•**

### **æ–¹æ³• 1ï¼šä½¿ç”¨ V2 å­¦ä¹ ç³»ç»Ÿï¼ˆæ¨èï¼‰**

```python
from v2_learning_system_real import LearningEngine
import asyncio

async def main():
    # åˆ›å»ºå­¦ä¹ å¼•æ“
    engine = LearningEngine(num_workers=3)
    
    # å­¦ä¹ ä¸»é¢˜ï¼ˆè‡ªåŠ¨ä¿å­˜åˆ°çŸ¥è¯†åº“ï¼‰
    topic = "Python ç¼–ç¨‹è¯­è¨€"
    results = await engine.parallel_learning(
        topic,
        num_perspectives=3,  # 3 ä¸ªè§†è§’
        save_to_kb=True      # âœ… è‡ªåŠ¨ä¿å­˜åˆ°çŸ¥è¯†åº“
    )
    
    print(f"âœ… å­¦ä¹ å®Œæˆï¼å·²ä¿å­˜ {len(results)} ä¸ªè§†è§’çš„çŸ¥è¯†")

asyncio.run(main())
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸ“š å­¦ä¹ ä¸»é¢˜ï¼šPython ç¼–ç¨‹è¯­è¨€

ğŸ’¾ âœ… å­¦ä¹ ç»“æœå·²ä¿å­˜åˆ°çŸ¥è¯†åº“ï¼š3 æ¡ ChromaDB, 3 æ¡ FTS5
âœ… å­¦ä¹ å®Œæˆï¼å·²ä¿å­˜ 3 ä¸ªè§†è§’çš„çŸ¥è¯†
```

---

### **æ–¹æ³• 2ï¼šæ‰‹åŠ¨ä¿å­˜åˆ°çŸ¥è¯†åº“**

```python
from v2_learning_system_real.knowledge_base_integration import KnowledgeBaseIntegration
import asyncio

async def main():
    kb = KnowledgeBaseIntegration()
    
    # æ¨¡æ‹Ÿå­¦ä¹ ç»“æœ
    topic = "æœºå™¨å­¦ä¹ "
    learning_data = [
        {
            "perspective": "technical",
            "result": "æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯...",
            "timestamp": "2026-02-18T19:00:00"
        }
    ]
    
    # ä¿å­˜åˆ°çŸ¥è¯†åº“
    result = await kb.save_learning_result(topic, learning_data)
    
    if result["success"]:
        print(f"âœ… {result['message']}")
    else:
        print(f"âŒ {result['message']}")

asyncio.run(main())
```

---

### **æ–¹æ³• 3ï¼šä½¿ç”¨ CLI å¯¼å…¥æ–‡ä»¶**

```bash
cd knowledge_base

# å¯¼å…¥ Markdown æ–‡ä»¶
python cli.py import my_knowledge.md

# å¯¼å…¥åè‡ªåŠ¨å»ºç«‹åŒç´¢å¼•
# âœ… å¯¼å…¥å®Œæˆï¼
# - çŸ¥è¯†æ¡ç›®ï¼š1 ä¸ª
# - ChromaDB ç´¢å¼•ï¼š1 ä¸ªæ–‡æ¡£
# - FTS5 ç´¢å¼•ï¼š1 ä¸ªæ–‡æ¡£
```

---

## ğŸ” **æœç´¢å·²å­¦çŸ¥è¯†**

### **è¯­ä¹‰æœç´¢ï¼ˆç†è§£æ„å›¾ï¼‰**
```bash
cd knowledge_base
python cli.py search "Python æ˜¯ä»€ä¹ˆ"
```

### **å…³é”®è¯æœç´¢ï¼ˆç²¾ç¡®åŒ¹é… + é«˜äº®ï¼‰**
```bash
python cli.py search-ft "Python"
```

### **Web UI æœç´¢**
```bash
cd knowledge_base
streamlit run app.py
# æµè§ˆå™¨è®¿é—® http://localhost:8501
```

---

## ğŸ“Š **é›†æˆæ¶æ„**

```
V2 å­¦ä¹ ç³»ç»Ÿ
    â”‚
    â”œâ”€ å­¦ä¹ ä¸»é¢˜ï¼ˆparallel_learningï¼‰
    â”‚   â”œâ”€ technical è§†è§’
    â”‚   â”œâ”€ practical è§†è§’
    â”‚   â””â”€ theoretical è§†è§’
    â”‚
    â†“ è‡ªåŠ¨ä¿å­˜ï¼ˆsave_to_kb=Trueï¼‰
    â”‚
KnowledgeBaseIntegration
    â”‚
    â”œâ”€ å‡†å¤‡çŸ¥è¯†æ¡ç›®
    â”‚   â”œâ”€ æ ¼å¼åŒ–å†…å®¹
    â”‚   â””â”€ æ·»åŠ å…ƒæ•°æ®
    â”‚
    â”œâ”€ ChromaDB ç´¢å¼•
    â”‚   â””â”€ ç”ŸæˆåµŒå…¥å‘é‡ï¼ˆSiliconFlow 1024 ç»´ï¼‰
    â”‚
    â””â”€ FTS5 ç´¢å¼•
        â””â”€ å…¨æ–‡ç´¢å¼•ï¼ˆBM25 æ’åï¼‰
```

---

## ğŸ¯ **çŸ¥è¯†æ¡ç›®æ ¼å¼**

æ¯ä¸ªå­¦ä¹ ç»“æœä¿å­˜ä¸ºï¼š

```markdown
# {å­¦ä¹ ä¸»é¢˜}

## è§†è§’ {N}: {è§†è§’åç§°}

{å­¦ä¹ ç»“æœå†…å®¹}

---
*å­¦ä¹ æ—¶é—´ï¼š{timestamp}*
*æ¥æºï¼šv2_learning_system*
```

**å…ƒæ•°æ®ï¼š**
```json
{
  "title": "Python ç¼–ç¨‹è¯­è¨€ - technical è§†è§’",
  "tags": "Python ç¼–ç¨‹è¯­è¨€ï¼Œtechnical,v2_learning",
  "source": "v2_learning_system",
  "topic": "Python ç¼–ç¨‹è¯­è¨€",
  "perspective": "technical",
  "learning_time": "2026-02-18T19:00:00"
}
```

---

## âš™ï¸ **é…ç½®é€‰é¡¹**

### **ç¯å¢ƒå˜é‡**
```bash
# çŸ¥è¯†åº“è·¯å¾„ï¼ˆå¯é€‰ï¼Œé»˜è®¤è‡ªåŠ¨æŸ¥æ‰¾ï¼‰
KNOWLEDGE_BASE_PATH=./knowledge_base

# Gateway é…ç½®
GATEWAY_URL=ws://127.0.0.1:8001

# æ•°æ®åº“è·¯å¾„
CHROMA_PATH=./data/chromadb
SQLITE_PATH=./data/knowledge.db
```

### **å­¦ä¹ å¼•æ“é…ç½®**
```python
engine = LearningEngine(
    num_workers=3,           # å¹¶è¡Œå­¦ä¹  worker æ•°é‡
    model="z-ai/glm4.7",    # ä½¿ç”¨çš„æ¨¡å‹
    save_to_kb=True         # æ˜¯å¦è‡ªåŠ¨ä¿å­˜
)
```

---

## ğŸ› **æ•…éšœæ’é™¤**

### **é—®é¢˜ 1ï¼šæ‰¾ä¸åˆ°çŸ¥è¯†åº“è·¯å¾„**
**é”™è¯¯ï¼š** `çŸ¥è¯†åº“è·¯å¾„æœªé…ç½®`

**è§£å†³ï¼š**
```python
# æ‰‹åŠ¨æŒ‡å®šè·¯å¾„
kb = KnowledgeBaseIntegration(
    knowledge_base_path="./knowledge_base"
)
```

### **é—®é¢˜ 2ï¼šåµŒå…¥ç”Ÿæˆå¤±è´¥**
**é”™è¯¯ï¼š** `asyncio.run() cannot be called from a running event loop`

**è§£å†³ï¼š** å·²è‡ªåŠ¨ä¿®å¤ï¼Œå®‰è£… `nest_asyncio`ï¼š
```bash
pip install nest_asyncio
```

### **é—®é¢˜ 3ï¼šChromaDB ä¸‹è½½ ONNX æ¨¡å‹å¾ˆæ…¢**
**ç°è±¡ï¼š** ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ä¼šä¸‹è½½æ¨¡å‹ï¼ˆ~80MBï¼‰

**è§£å†³ï¼š** è€å¿ƒç­‰å¾…å®Œæˆï¼Œæˆ–æ‰‹åŠ¨ä¸‹è½½ï¼š
```bash
# æ¨¡å‹ä¼šè‡ªåŠ¨ç¼“å­˜åˆ° C:\Users\{user}\.cache\chroma\
```

---

## ğŸ“ˆ **æ€§èƒ½ä¼˜åŒ–**

### **1. æ‰¹é‡å­¦ä¹ **
```python
# ä¸€æ¬¡å­¦ä¹ å¤šä¸ªä¸»é¢˜
topics = ["Python", "æœºå™¨å­¦ä¹ ", "æ·±åº¦å­¦ä¹ "]
for topic in topics:
    await engine.parallel_learning(topic, save_to_kb=True)
```

### **2. ç¼“å­˜æœºåˆ¶**
- âœ… åµŒå…¥å‘é‡è‡ªåŠ¨ç¼“å­˜ï¼ˆé¿å…é‡å¤è°ƒç”¨ APIï¼‰
- âœ… å­¦ä¹ ç»“æœç¼“å­˜ï¼ˆ`data/learning_cache.json`ï¼‰

### **3. å¹¶è¡Œç´¢å¼•**
ChromaDB å’Œ FTS5 å¹¶è¡Œå»ºç«‹ç´¢å¼•ï¼Œæå‡é€Ÿåº¦ã€‚

---

## ğŸ“ **ä½¿ç”¨åœºæ™¯**

### **åœºæ™¯ 1ï¼šå¿«é€Ÿå­¦ä¹ æ–°çŸ¥è¯†**
```python
# å­¦ä¹ "é‡å­è®¡ç®—"
await engine.parallel_learning("é‡å­è®¡ç®—", num_perspectives=3)
# âœ… è‡ªåŠ¨ä¿å­˜ï¼Œç«‹å³å¯æœç´¢
```

### **åœºæ™¯ 2ï¼šæ·±å…¥ç ”ç©¶ä¸»é¢˜**
```python
# å¤šè§†è§’æ·±å…¥å­¦ä¹ 
await engine.parallel_learning(
    "äººå·¥æ™ºèƒ½ä¼¦ç†",
    num_perspectives=5,  # 5 ä¸ªè§†è§’
    save_to_kb=True
)
```

### **åœºæ™¯ 3ï¼šå¤ä¹ å·²å­¦çŸ¥è¯†**
```bash
# æœç´¢ä¹‹å‰å­¦è¿‡çš„å†…å®¹
python cli.py search "äººå·¥æ™ºèƒ½"
python cli.py search-ft "ä¼¦ç†"
```

---

## ğŸ“Š **é›†æˆæ•ˆæœ**

| æŒ‡æ ‡ | é›†æˆå‰ | é›†æˆå | æ”¹å–„ |
|------|--------|--------|------|
| **çŸ¥è¯†ä¿å­˜** | æ‰‹åŠ¨ | è‡ªåŠ¨ | âœ… **100% è‡ªåŠ¨åŒ–** |
| **æœç´¢èƒ½åŠ›** | æ—  | åŒç´¢å¼• | âœ… **è¯­ä¹‰ + å…³é”®è¯** |
| **çŸ¥è¯†å¤ç”¨** | âŒ å›°éš¾ | âœ… ç«‹å³å¯ç”¨ | âœ… **å³æ—¶æœç´¢** |
| **å­¦ä¹ æˆæœ** | ä¸´æ—¶å†…å­˜ | æŒä¹…åŒ–å­˜å‚¨ | âœ… **æ°¸ä¹…ä¿å­˜** |

---

## ğŸš€ **æœªæ¥åŠŸèƒ½**

- [ ] çŸ¥è¯†å›¾è°±å¯è§†åŒ–
- [ ] è‡ªåŠ¨å»é‡ï¼ˆé¿å…é‡å¤å­¦ä¹ ï¼‰
- [ ] çŸ¥è¯†æ›´æ–°ï¼ˆè‡ªåŠ¨åˆå¹¶æ–°æ—§çŸ¥è¯†ï¼‰
- [ ] å­¦ä¹ è®¡åˆ’ï¼ˆå®šæ—¶å¤ä¹ ï¼‰
- [ ] çŸ¥è¯†æ¨èï¼ˆç›¸å…³ä¸»é¢˜æ¨èï¼‰

---

## ğŸ“ **æŠ€æœ¯æ”¯æŒ**

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æœ¬ä½¿ç”¨æŒ‡å—
2. æ£€æŸ¥æ—¥å¿—è¾“å‡º
3. è”ç³»å¼€å‘å›¢é˜Ÿ

---

**æœ€åæ›´æ–°ï¼š** 2026-02-18  
**ç‰ˆæœ¬ï¼š** v0.3.0  
**GitHubï¼š** https://github.com/zhoushibo/knowledge-base
