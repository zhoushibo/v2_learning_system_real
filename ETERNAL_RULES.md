# 🔴 永久核心规则（必须遵守）

**重要等级：** 🔴🔴🔴 最高
**优先级：** P0（不可违背）
**生效时间：** 2026-02-16
**制定人：** 博 + Claw

---

## 🎯 规则概览

| 规则 | 重要性 | 适用范围 |
|------|--------|---------|
| **规则1：永远不要考虑时间成本** | 🔴 最高 | 所有项目 |
| **规则2：长期优先原则** ⭐ 新增 | 🔴 最高 | 所有决策 |
| **规则3：四轮专家会议流程** | 🔴 最高 | 新项目启动前 |
| **规则4：可行性研究调查** | 🔴 最高 | 方案决定后 |
| **规则5：风险评估与备选方案** | 🔴 最高 | 方案决定后 |

---

## 🚨 **规则1：永远不要考虑时间成本**

**核心原则：**

**所有项目开发，永远不要考虑时间成本！**

### ✅ 必须做到：
- **正确第一，速度第二**
- **质量第一，效率第二**
- 充分测试（覆盖率≥80%）
- 完整文档（README/API/架构）
- 可行性调查（必做）
- 风险评估（至少3个失败场景）
- 代码规范（PEP8、类型标注）

### ❌ 绝对禁止：
- ❌ 跳过测试（为了省时间）
- ❌ 跳过文档（为了省时间）
- ❌ 跳过可行性调查（为了省时间）
- ❌ 跳过风险评估（为了省时间）
- ❌ 使用硬编码（为了省时间）
- ❌ 使用魔法值（为了省时间）
- ❌ 说"这个方案太慢了"（作为拒绝理由）

### 💡 为什么？

**"欲速则不达"**

- 省时间的方法 → 导致返工 → 实际上更慢
- 不省时间的方法 → 一次做对 → 实际上更快

**详细文档：** `memory/RULE_NEVER_CONSIDER_TIME_COST.md`

---

## 🚨 **规则2：长期优先原则** ⭐ 新增

**适用范围：** 所有决策（技术方案、系统设计、规则制定等）
**生效时间：** 2026-02-17 04:54
**制定人：** 博 + Claw

### **核心原则：**

**决策时优先考虑长期最优方案，而非短期/中期修补式改进，直接实施最优解，避免重复劳动**

### ✅ 必须做到：

1. **方案优先级排序：**
   ```
   长期最优方案 >> 中期可行方案 >> 短期快速方案
   ```

2. **直接实施最优解：**
   - ✅ 选择能长期受益的方案
   - ✅ 一次做到位（不要做临时方案）
   - ✅ 避免"先做个简单的，以后再优化"（永远不会优化）

3. **避免修补式改进：**
   - ❌ 不要做"补丁式"解决方案
   - ❌ 不要做"临时先这样"的方案
   - ❌ 不要为了省工作量而妥协

4. **避免重复劳动：**
   - ✅ 考虑3年、5年后的需求
   - ✅ 设计可扩展架构
   - ✅ 预留接口和扩展点

### 📊 决策示例

#### 示例1：规则执行保障系统

**背景：** 如何确保规则被遵守？

**❌ 错误决策（短期思路）：**
- 方案A：强制规则提醒（短期，快速实施）
- 方案B：规则库系统（中期，1周后）
- 方案C：规则拒绝机制（长期，2周后）

**✅ 正确决策（长期优先）：**
- 直接实施方案C（规则拒绝机制）
- 不A/B/C分阶段，一次到位
- 可靠性：99%（而不是90% → 95% → 99%）

#### 示例2：架构设计

**❌ 错误决策（短期思路）：**
- "先做个简单版本，以后再重构"
- "这个功能先硬编码，以后再做配置"
- "数据库先简单设计，以后再优化"

**✅ 正确决策（长期优先）：**
- 直接设计可扩展架构
- 使用配置系统（而不是硬编码）
- 考虑3年后的数据量和需求

### 🎯 与"永远不要考虑时间成本"的关系

**这两条规则是一致的：**

| 规则 | 核心内容 | 目标 |
|------|---------|------|
| **永远不要考虑时间成本** | 正确第一，速度第二 | 质量 |
| **长期优先原则** | 长期最优，短期修补 | 实施深度 |

**共同点：**
- ✅ 都反对"为了省时间而妥协"
- ✅ 都要求"一次做对"
- ✅ 都追求"长期受益"

### 💡 为什么？

**"临时方案就是永久方案"**

- 你说"先简单做个版本" → 这个版本就会一直用下去
- 你说"以后再优化" → 永远不会优化
- 修补式改进 → 堆积成技术债 → 更难维护

**直接做最优解：**
- 一次投入 → 长期受益
- 避免重复劳动 → 总体更高效
- 系统稳定 → 不需要持续维护

### 🚫 决策检查清单

**做任何决策时：**
- [ ] 这是长期最优方案吗？
- [ ] 还是临时修补式方案？
- [ ] 3年后这个方案还适用吗？
- [ ] 是否需要以后重做？
- [ ] 如果需要，为什么不现在直接做对？

**如果是"临时方案"或"以后再优化"（❌）：**
- 停止！重新考虑长期最优方案

**如果是"长期最优方案"（✅）：**
- 继续！直接实施

### 📚 历史教训

**反面案例：**
- 很多项目说"先做个简单的"，但永远不会优化
- 临时补丁堆积，最后不得不重写
- 浪费了大量时间在修补和维护上

**正面案例：**
- V2学习系统：直接设计完整的LearningEngine + ValidationEngine + MemorySystem
- V2专家会议：直接并行化，不是先串行再改
- 一次性做对，无需返工

---

## 📋 **规则3：四轮专家会议流程（启动前必做）**

**适用范围：** 所有新项目启动前

### **会议轮次：**

#### **第一轮：技术方案分析**（≤9分钟）
- 讨论技术选型
- 架构设计
- 分析潜在问题

#### **第二轮：安全与崩溃防护**（≤9分钟）
- 分析崩溃点
- 设计防护机制
- **承诺：永不崩溃、永不阻塞**

#### **第三轮：收益与最优化分析**（≤9分钟）
- 量化收益（性能、质量、可维护性）
- **注意：不含时间成本评估**
- 优化路径

#### **第四轮：开发规范制定**（≤9分钟）
- Git工作流
- 代码质量
- 测试要求
- 安全合规

### **时间限制：**
- **单轮会议：≤9分钟**
- 原因：避免OpenClaw会话超时（10分钟限制）

---

## 🔬 **规则4：可行性研究调查（方案决定后必做）**

**适用范围：** 四轮专家会议决定方案后

### **检查清单：**

- [ ] **技术可行性** - 所需技术是否可用？API是否存在？
- [ ] **外部依赖调查** - 是否依赖外部服务/接口？是否需要授权？
- [ ] **资源可用性** - 硬件资源、API配额、存储空间是否足够？
- [ ] **风险评估** - 有无未考虑的风险？是否有备选方案？

**注意：** 不需要时间预估（根据"规则1"）

### **调查方法：**

1. 文档查阅
2. 代码搜索
3. 记忆搜索（MEMORY.md）
4. 技术验证

### **结果处理：**

- ✅ **可行** - 继续实施
- ⚠️ **部分可行** - 调整方案
- ❌ **不可行** - 立即考虑其他方案

---

## 🛡️ **规则5：风险评估与备选方案（方案决定后必做）**

**适用范围：** 可行性调查后

### **必须包含：**

#### **失败场景分析（至少3个）：**
- [ ] 失败场景1 - 描述、原因、影响、应对措施
- [ ] 失败场景2 - 描述、原因、影响、应对措施
- [ ] 失败场景3 - 描述、原因、影响、应对措施

#### **备选方案（至少1个）：**
- [ ] 备选方案1
  - 描述
  - 触发条件
  - 预估效果
  - 实施成本

#### **回滚计划（必须有）：**
- [ ] 如何回滚
- [ ] 数据如何恢复
- [ ] 服务如何恢复
- [ ] 用户如何通知

---

## 📊 **规则执行检查清单**

### **新项目启动时：**
- [ ] 阅读 `ETERNAL_RULES.md`
- [ ] 完成4轮专家会议
- [ ] 通过 feasibility investigation
- [ ] 完成风险评估
- [ ] 制定回滚计划

### **每次项目决策时：**
- [ ] 检查是否违反"时间成本规则"
- [ ] 检查是否跳过必要步骤
- [ ] 确保质量标准

---

## 🚨 **违反规则的后果**

### **后果：**

- ❌ **项目质量下降**
- ❌ **系统不稳定**
- ❌ **维护困难**
- ❌ **需要返工**
- ❌ **最终浪费更多时间**

### **历史教训：**

**失败案例：OpenClaw V2初版**
- 为了快速，跳过可行性调查 ✗
- 假设sessions_spawn可以外部调用 ✗
- 结果：架构无法实现，需要重新设计 ✗
- 浪费：时间、精力、token ✗

---

## 📚 **相关文档**

- 通用规则详情：`MEMORY.md`
- 时间成本规则：`memory/RULE_NEVER_CONSIDER_TIME_COST.md`
- 项目开发规范：`MEMORY.md`
- **长期优先规则**：`ETERNAL_RULES.md`（第2条）

---

**规则生效时间：** 2026-02-16 22:36（规则1）→ 2026-02-17 04:54（规则2）
**规则制定人：** 博 + Claw
**规则状态：** 🔴🔴🔴 永久生效，不可撤销
**适用范围：** 所有未来的软件开发项目

---

## ✨ 核心理念

**质量第一、正确第一、可维护性第一**

> "慢工出细活"
> "欲速则不达"
> "一次做对，永远不用返工"
> **"临时方案就是永久方案，直接做最优解"** ⭐

---
