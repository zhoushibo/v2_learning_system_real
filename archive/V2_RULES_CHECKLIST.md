# V2 规则检查清单（简化版 v2.1.0）

**生效时间：** 2026-02-17 21:40  
**版本：** v2.1.0  
**用途：** 快速检查任务规则遵守情况

---

## ⚡ S 级任务（简单）检查清单

**适用场景：** 单文件修改、文档更新、配置调整、简单 bug 修复  
**流程：** 快速通道（5 分钟）

### ✅ 必须检查（P0 规则）
- [ ] **质量第一**：代码正确，无明显 bug
- [ ] **代码审查**：至少 1 人审查（或 AI 审查）
- [ ] **简单测试**：验证修改有效
- [ ] **文档更新**：24 小时内完成（可选，但推荐）

### ⏸️ 豁免检查
- [x] ~~四轮专家会议~~（S 级跳过）
- [x] ~~可行性调查~~（S 级跳过）
- [x] ~~风险评估~~（S 级跳过）
- [x] ~~MVP 优先~~（S 级不适用）

### 📝 快速检查表（打印携带）
```
S 级任务快速检查（5 分钟）
┌────────────────────────────┐
│ [ ] 1. 质量第一（无 bug）   │
│ [ ] 2. 代码审查（1 人）     │
│ [ ] 3. 简单测试（验证）     │
│ [ ] 4. 文档更新（24h 内）   │
└────────────────────────────┘
总耗时：≤5 分钟
```

### 示例任务
- ✅ 修复拼写错误
- ✅ 更新配置文件
- ✅ 添加简单日志
- ✅ 修改注释
- ✅ 调整参数

---

## 🔧 M 级任务（中等）检查清单

**适用场景：** 新功能开发、模块重构、工具集成、性能优化  
**流程：** 简化版两轮会议（30 分钟）

### ✅ 必须检查（P0 规则）
- [ ] **质量第一**：正确性优先，不妥协
- [ ] **MVP 优先**：先实现核心功能（20% 功能，80% 价值）
- [ ] **代码审查**：至少 1 人审查（关键代码 2 人）
- [ ] **测试标准**：覆盖率 ≥ 80%
- [ ] **文档更新**：必须更新（README/API/使用示例）
- [ ] **回滚方案**：简单回滚步骤（<5 分钟）

### ✅ 简化版两轮会议（30 分钟）
#### 第一轮：可行性与实施（15 分钟）
- [ ] **技术方案**：技术选型、架构设计（简单）
- [ ] **外部依赖**：依赖调查（1-2 个）
- [ ] **实施步骤**：分步计划（3-5 步）
- [ ] **资源检查**：磁盘、内存、API 配额

#### 第二轮：安全与测试（15 分钟）
- [ ] **风险评估**：≥2 个失败场景 + 应对措施
- [ ] **测试策略**：单元测试、集成测试
- [ ] **回滚计划**：如何回滚、数据恢复
- [ ] **监控告警**：关键指标监控

### ⏸️ 豁免检查
- [x] ~~完整四轮会议~~（M 级用简化版）
- [x] ~~详细可行性调查~~（M 级用简化版）

### 📝 快速检查表（打印携带）
```
M 级任务检查清单（30 分钟）
┌────────────────────────────────────┐
│ 第一轮：可行性与实施（15 分钟）     │
│ [ ] 1. 技术方案（选型 + 设计）      │
│ [ ] 2. 外部依赖（调查 1-2 个）      │
│ [ ] 3. 实施步骤（3-5 步）           │
│ [ ] 4. 资源检查（磁盘/内存/API）    │
├────────────────────────────────────┤
│ 第二轮：安全与测试（15 分钟）       │
│ [ ] 5. 风险评估（≥2 个失败场景）    │
│ [ ] 6. 测试策略（覆盖率≥80%）       │
│ [ ] 7. 回滚计划（<5 分钟）          │
│ [ ] 8. 监控告警（关键指标）         │
├────────────────────────────────────┤
│ P0 规则（必须遵守）                 │
│ [✓] 质量第一                        │
│ [✓] MVP 优先                        │
│ [✓] 代码审查（1-2 人）              │
│ [✓] 测试覆盖（≥80%）                │
│ [✓] 文档更新（必须）                │
│ [✓] 回滚方案（必须）                │
└────────────────────────────────────┘
总耗时：≤30 分钟
```

### 示例任务
- ✅ 开发新工具（如 file_read）
- ✅ 重构现有模块
- ✅ 集成第三方 API
- ✅ 性能优化（提升 20%+）
- ✅ 添加新功能模块

---

## 🏗️ L 级任务（复杂）检查清单

**适用场景：** 系统架构变更、核心模块开发、多模块重构、平台级功能  
**流程：** 完整四轮会议（90 分钟）

### ✅ 必须检查（P0 规则）
- [ ] **质量第一**：绝不妥协，正确性优先
- [ ] **MVP 优先**：先验证核心逻辑（1-2 天）
- [ ] **代码审查**：至少 2 人审查（核心代码 3 人）
- [ ] **测试标准**：覆盖率 ≥ 80% + 回归测试
- [ ] **文档更新**：完整文档（架构/API/使用/部署）
- [ ] **回滚方案**：完整回滚计划（测试过）
- [ ] **持续文档**：每日更新记忆（memory/YYYY-MM-DD.md）

### ✅ 完整四轮会议（每轮≤9 分钟）
#### 第一轮：技术方案分析（≤9 分钟）
- [ ] **技术选型**：对比至少 2 个方案
- [ ] **架构设计**：分层、模块化、接口定义
- [ ] **潜在问题**：瓶颈、风险点、技术难点
- [ ] **优化方案**：性能、安全、可维护性

#### 第二轮：安全与崩溃防护（≤9 分钟）
- [ ] **崩溃点分析**：所有可能的失败场景
- [ ] **多层防护**：超时、熔断、降级、重试
- [ ] **容错恢复**：自动恢复、手动恢复
- [ ] **承诺**：永不崩溃、永不阻塞

#### 第三轮：收益与最优化分析（≤9 分钟）
- [ ] **收益量化**：性能提升、质量改善、可维护性
- [ ] **不评估时间成本**：遵守规则 1
- [ ] **优化路径**：分阶段、可衡量指标
- [ ] **终极指标**：成功标准（可量化）

#### 第四轮：开发规范制定（≤9 分钟）
- [ ] **Git 工作流**：分支策略、提交规范
- [ ] **代码质量**：编码规范、类型标注、Lint
- [ ] **测试要求**：覆盖率、测试类型、CI/CD
- [ ] **安全合规**：敏感信息、输入验证、日志

### ✅ 可行性与风险评估（会议后必做）
- [ ] **技术可行性**：技术是否可用、API 是否存在
- [ ] **外部依赖**：依赖调查、授权检查
- [ ] **资源可用性**：硬件、API 配额、存储
- [ ] **失败场景**：≥3 个场景 + 应对措施
- [ ] **备选方案**：≥1 个备选方案
- [ ] **回滚计划**：完整回滚步骤（测试过）

### ✅ MVP 验证（实施前必做）
- [ ] **核心功能**：选择 20% 功能（80% 价值）
- [ ] **快速搭建**：1-2 天完成 MVP
- [ ] **验证通过**：核心逻辑可行
- [ ] **继续完善**：验证通过后扩展功能

### 📝 快速检查表（打印携带）
```
L 级任务检查清单（90 分钟 + 实施）
┌────────────────────────────────────┐
│ 第一轮：技术方案（≤9 分钟）         │
│ [ ] 1. 技术选型（≥2 方案对比）      │
│ [ ] 2. 架构设计（分层 + 模块化）    │
│ [ ] 3. 潜在问题（瓶颈 + 风险）      │
│ [ ] 4. 优化方案（性能 + 安全）      │
├────────────────────────────────────┤
│ 第二轮：安全防护（≤9 分钟）         │
│ [ ] 5. 崩溃点分析（所有场景）       │
│ [ ] 6. 多层防护（超时 + 熔断）      │
│ [ ] 7. 容错恢复（自动 + 手动）      │
│ [ ] 8. 承诺（永不崩溃）             │
├────────────────────────────────────┤
│ 第三轮：收益优化（≤9 分钟）         │
│ [ ] 9. 收益量化（性能 + 质量）      │
│ [ ] 10. 不评估时间成本              │
│ [ ] 11. 优化路径（分阶段）          │
│ [ ] 12. 终极指标（可量化）          │
├────────────────────────────────────┤
│ 第四轮：开发规范（≤9 分钟）         │
│ [ ] 13. Git 工作流（分支 + 提交）   │
│ [ ] 14. 代码质量（规范 + Lint）     │
│ [ ] 15. 测试要求（覆盖 + CI/CD）    │
│ [ ] 16. 安全合规（敏感 + 验证）     │
├────────────────────────────────────┤
│ 可行性与风险（会议后必做）          │
│ [ ] 17. 技术可行性                  │
│ [ ] 18. 外部依赖调查                │
│ [ ] 19. 资源可用性                  │
│ [ ] 20. 失败场景（≥3 个）           │
│ [ ] 21. 备选方案（≥1 个）           │
│ [ ] 22. 回滚计划（测试过）          │
├────────────────────────────────────┤
│ MVP 验证（实施前必做）              │
│ [ ] 23. 核心功能（20%→80%）         │
│ [ ] 24. 快速搭建（1-2 天）          │
│ [ ] 25. 验证通过                    │
├────────────────────────────────────┤
│ P0 规则（全程遵守）                 │
│ [✓] 质量第一                        │
│ [✓] MVP 优先                        │
│ [✓] 代码审查（≥2 人）               │
│ [✓] 测试覆盖（≥80% + 回归）         │
│ [✓] 文档完整（架构/API/使用）       │
│ [✓] 回滚方案（测试过）              │
│ [✓] 持续文档（每日更新记忆）        │
└────────────────────────────────────┘
总耗时：≤90 分钟（会议）+ 实施时间
```

### 示例任务
- ✅ 开发 JARVIS Core 系统
- ✅ 重构整个工具引擎
- ✅ 开发多用户支持
- ✅ 开发知识图谱系统
- ✅ 平台迁移（Python → TypeScript）

---

## 🚨 例外情况检查清单

### 紧急修复（Hotfix）
**场景：** 生产环境严重 bug，立即修复

- [ ] **立即修复**（无需会议）
- [ ] **简单测试**（验证修复有效）
- [ ] **快速部署**
- [ ] **事后补文档**（24 小时内）
- [ ] **事后复盘**（48 小时内，分析根因）
- [ ] **记录到记忆**（memory/YYYY-MM-DD.md）

### 实验性代码（Experimental）
**场景：** 探索性开发、技术验证、原型

- [ ] **标记为 `experimental/`**
- [ ] **宽松规则**（无需完整流程）
- [ ] **验证成功** → 转为正式代码（补全流程）
- [ ] **验证失败** → 删除或归档
- [ ] **记录决策**（memory/YYYY-MM-DD.md）

---

## 📊 规则遵守度自评表

**每次任务完成后自评（1 分钟）**

### 评分标准（满分 100 分）
| 维度 | 权重 | 评分标准 | 得分 |
|------|------|----------|------|
| **规则遵守度** | 40% | 是否遵守对应级别的规则 | /40 |
| **测试覆盖率** | 30% | 测试是否达标（S:简单验证，M/L:≥80%） | /30 |
| **文档完整性** | 20% | 文档是否及时更新 | /20 |
| **代码质量** | 10% | 代码规范、可读性、可维护性 | /10 |
| **总分** | 100% | | /100 |

### 评分等级
- **S 级（95-100 分）：** 卓越，减少检查频率（信任机制）
- **A 级（85-94 分）：** 优秀，保持标准检查
- **B 级（70-84 分）：** 良好，标准检查
- **C 级（60-69 分）：** 合格，增加检查频率
- **D 级（<60 分）：** 需改进，强制审查 + 复盘

### 自评模板
```markdown
## 任务自评（YYYY-MM-DD HH:MM）

**任务名称：** [任务描述]
**复杂度等级：** [S/M/L]
**实际耗时：** [X 分钟]

### 评分
- 规则遵守度：__/40
- 测试覆盖率：__/30
- 文档完整性：__/20
- 代码质量：__/10
- **总分：__/100** → 等级：[S/A/B/C/D]

### 优点
- [优点 1]
- [优点 2]

### 改进点
- [改进点 1]
- [改进点 2]

### 行动计划
- [ ] [具体改进行动]
```

---

## 🎯 快速参考卡片（打印剪下携带）

### S 级（简单）→ 5 分钟
```
┌──────────────────────┐
│ S 级快速通道          │
│ [ ] 质量第一          │
│ [ ] 代码审查          │
│ [ ] 简单测试          │
│ [ ] 文档（24h 内）     │
└──────────────────────┘
```

### M 级（中等）→ 30 分钟
```
┌──────────────────────┐
│ M 级标准流程          │
│ 第一轮（15 分钟）      │
│ [ ] 技术方案          │
│ [ ] 外部依赖          │
│ [ ] 实施步骤          │
│ [ ] 资源检查          │
├──────────────────────┤
│ 第二轮（15 分钟）      │
│ [ ] 风险评估（≥2）    │
│ [ ] 测试（≥80%）      │
│ [ ] 回滚（<5 分钟）    │
│ [ ] 监控告警          │
└──────────────────────┘
```

### L 级（复杂）→ 90 分钟
```
┌──────────────────────┐
│ L 级完整流程          │
│ 四轮会议（4×9 分钟）   │
│ [ ] 技术方案          │
│ [ ] 安全防护          │
│ [ ] 收益优化          │
│ [ ] 开发规范          │
├──────────────────────┤
│ 可行性风险（会后）    │
│ [ ] 技术可行性        │
│ [ ] 失败场景（≥3）    │
│ [ ] 备选方案（≥1）    │
│ [ ] 回滚计划          │
├──────────────────────┤
│ MVP 验证（实施前）    │
│ [ ] 核心功能          │
│ [ ] 快速搭建          │
│ [ ] 验证通过          │
└──────────────────────┘
```

---

## 📝 使用说明

### 何时使用
- **任务开始前：** 判断复杂度等级（S/M/L）
- **任务进行中：** 对照检查清单，确保遵守规则
- **任务完成后：** 自评打分，记录改进点

### 如何使用
1. **打印检查清单**（或保存为 PDF）
2. **任务开始时**，选择对应等级的清单
3. **逐项检查**，打勾确认
4. **任务完成后**，填写自评表
5. **定期回顾**，持续改进

### 数字化（未来）
- [ ] 开发 `v2-check` 工具，自动检查
- [ ] Git 钩子集成，提交前自动检查
- [ ] CI/CD 集成，质量门禁
- [ ] 自动评分，生成报告

---

**版本历史：**
- **v2.1.0（2026-02-17 21:40）：** 初始版本，S/M/L 三级检查清单
- **v2.1.1（计划）：** 添加自动化检查工具集成
- **v2.2.0（计划）：** 添加质量评分自动计算

**下一步：** 测试新流程，收集反馈并优化。
