# æ‰¹é‡ä»»åŠ¡æäº¤æŒ‡å—

---

## ğŸ“‹ **V2ä»»åŠ¡æäº¤æ–¹å¼å¯¹æ¯”**

| æ–¹å¼ | å¹¶å‘ | æ˜“ç”¨æ€§ | é€‚ç”¨åœºæ™¯ |
|------|------|--------|---------|
| **GUIç•Œé¢** | âŒ ä¸€æ¬¡ä¸€ä¸ª | â­â­â­â­â­ | å°‘é‡ä»»åŠ¡ï¼Œæ‰‹åŠ¨æ“ä½œ |
| **æ‰¹é‡è„šæœ¬ï¼ˆä¸²è¡Œï¼‰** | âŒ ä¸€æ¬¡ä¸€ä¸ª | â­â­â­â­ | æ‰¹é‡ä»»åŠ¡ï¼Œç®€å•å¯é  |
| **å¹¶å‘è„šæœ¬** | âœ… ä¸€æ¬¡å¤šä¸ª | â­â­â­â­ | å¤§æ‰¹é‡ä»»åŠ¡ï¼Œå¿«é€Ÿå¤„ç† |
| **APIè°ƒç”¨** | âœ… è‡ªå®šä¹‰ | â­â­â­ | å¼€å‘è€…é›†æˆ |

---

## ğŸš€ **æ–¹æ³•1: ä½¿ç”¨æ‰¹é‡æäº¤è„šæœ¬**

### ä¸²è¡Œç‰ˆæœ¬ï¼ˆé€ä¸ªæäº¤ï¼‰

```bash
cd project_manager_gui
python batch_submit.py
```

**ç‰¹ç‚¹ï¼š**
- âœ… ç®€å•å¯é 
- âœ… é€ä¸ªæäº¤ï¼Œé€ä¸ªç­‰å¾…
- âœ… é€‚åˆå°‘é‡ä»»åŠ¡ï¼ˆ10ä¸ªä»¥å†…ï¼‰
- âš ï¸ è¾ƒæ…¢ï¼ˆæ€»æ—¶é—´ = å„ä»»åŠ¡æ—¶é—´ä¹‹å’Œï¼‰

**é€‚ç”¨åœºæ™¯ï¼š**
- æœ‰5-10ä¸ªç›¸å…³ä»»åŠ¡
- éœ€è¦çœ‹åˆ°æ¯ä¸ªä»»åŠ¡çš„è¯¦ç»†ç»“æœ
- ä¸è¿½æ±‚é€Ÿåº¦

### å¹¶å‘ç‰ˆæœ¬ï¼ˆåŒæ—¶æäº¤å¤šä¸ªï¼‰

```bash
cd project_manager_gui
python batch_submit_concurrent.py
```

**ç‰¹ç‚¹ï¼š**
- âš¡ é€Ÿåº¦å¿«
- âœ… åŒæ—¶æäº¤å¤šä¸ªä»»åŠ¡
- âœ… é€‚åˆå¤§æ‰¹é‡ä»»åŠ¡ï¼ˆ10ä¸ªä»¥ä¸Šï¼‰
- âš ï¸ éœ€è¦ä¿è¯Gatewayå’ŒWorkerè¶³å¤Ÿå¼ºå¤§

**é€‚ç”¨åœºæ™¯ï¼š**
- æœ‰10+ä¸ªç‹¬ç«‹ä»»åŠ¡
- è¿½æ±‚é€Ÿåº¦
- ä»»åŠ¡ä¹‹é—´æ— ä¾èµ–å…³ç³»

---

## ğŸ’» **æ–¹æ³•2: è‡ªå®šä¹‰è„šæœ¬**

### åŸºç¡€ç‰ˆæœ¬

```python
import requests
import time

GATEWAY_URL = "http://127.0.0.1:8000"

# å®šä¹‰ä»»åŠ¡åˆ—è¡¨
tasks = [
    "ä»»åŠ¡1: ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±",
    "ä»»åŠ¡2: ç¿»è¯‘è¿™å¥è¯åˆ°è‹±æ–‡",
    "ä»»åŠ¡3: å†™ä¸€æ®µä»£ç "
]

# æ‰¹é‡æäº¤
task_ids = []
for task in tasks:
    response = requests.post(
        f"{GATEWAY_URL}/tasks",
        json={"content": task}
    )

    if response.status_code == 200:
        task_id = response.json()['task_id']
        task_ids.append(task_id)
        print(f"âœ… æäº¤æˆåŠŸ: {task_id}")

# ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
for task_id in task_ids:
    while True:
        response = requests.get(f"{GATEWAY_URL}/tasks/{task_id}")
        task = response.json()

        if task['status'] == 'completed':
            print(f"âœ… ä»»åŠ¡å®Œæˆ: {task_id}")
            print(f"   æ¨¡å‹: {task['metadata']['model']}")
            print(f"   ç»“æœ: {task['result'][:100]}...")
            break

        time.sleep(1)
```

### å¹¶å‘ç‰ˆæœ¬ï¼ˆä½¿ç”¨ThreadPoolï¼‰

```python
import requests
import concurrent.futures

GATEWAY_URL = "http://127.0.0.1:8000"

def submit_task(task_content):
    """æäº¤å•ä¸ªä»»åŠ¡"""
    response = requests.post(
        f"{GATEWAY_URL}/tasks",
        json={"content": task_content},
        timeout=10
    )

    if response.status_code == 200:
        return response.json()['task_id']
    return None

# å®šä¹‰ä»»åŠ¡åˆ—è¡¨
tasks = [
    "ä»»åŠ¡1",
    "ä»»åŠ¡2",
    "ä»»åŠ¡3"
]

# å¹¶å‘æäº¤ï¼ˆ5ä¸ªå¹¶å‘ï¼‰
with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:
    futures = [executor.submit(submit_task, task) for task in tasks]

    for future in concurrent.futures.as_completed(futures):
        task_id = future.result()
        print(f"âœ… æäº¤æˆåŠŸ: {task_id}")
```

---

## ğŸ“Š **æ€§èƒ½å¯¹æ¯”**

### ç¤ºä¾‹åœºæ™¯ï¼š10ä¸ªä»»åŠ¡

å‡è®¾æ¯ä¸ªä»»åŠ¡å¹³å‡è€—æ—¶1.5ç§’

| æ–¹å¼ | è€—æ—¶ | è¯´æ˜ |
|------|------|------|
| **GUIæ‰‹åŠ¨** | 15ç§’ | é€ä¸ªæ‰‹åŠ¨æäº¤ |
| **ä¸²è¡Œè„šæœ¬** | 15ç§’ | è‡ªåŠ¨é€ä¸ªæäº¤ |
| **å¹¶å‘è„šæœ¬ï¼ˆ5å¹¶å‘ï¼‰** | ~3ç§’ | åŒæ—¶æ‰§è¡Œ5ä¸ª |
| **å¹¶å‘è„šæœ¬ï¼ˆ10å¹¶å‘ï¼‰** | ~1.5ç§’ | åŒæ—¶æ‰§è¡Œ10ä¸ª |

### ç†è®ºæœ€ä¼˜

**æœ€å¿«æ—¶é—´** = max(æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œæ—¶é—´)

å› ä¸ºV2æ”¯æŒå¤šWorkerå¹¶å‘æ‰§è¡Œã€‚

---

## ğŸ¯ **ä½¿ç”¨å»ºè®®**

### å°‘é‡ä»»åŠ¡ï¼ˆ<5ä¸ªï¼‰
**æ¨èï¼š** ä½¿ç”¨GUIç•Œé¢
- æ“ä½œç®€å•
- å›¾å½¢åŒ–ç•Œé¢
- å®æ—¶æŸ¥çœ‹ç»“æœ

### ä¸­ç­‰ä»»åŠ¡é‡ï¼ˆ5-10ä¸ªï¼‰
**æ¨èï¼š** ä½¿ç”¨`batch_submit.py`ï¼ˆä¸²è¡Œï¼‰
- ç®€å•å¯é 
- è„šæœ¬è‡ªåŠ¨åŒ–
- å®Œæ•´æ—¥å¿—è¾“å‡º

### å¤§æ‰¹é‡ä»»åŠ¡ï¼ˆ>10ä¸ªï¼‰
**æ¨èï¼š** ä½¿ç”¨`batch_submit_concurrent.py`ï¼ˆå¹¶å‘ï¼‰
- é€Ÿåº¦å¿«
- è‡ªåŠ¨åŒ–å¤„ç†
- é€‚åˆæ‰¹é‡æ“ä½œ

### æå¤§æ‰¹é‡ï¼ˆ>50ä¸ªï¼‰
**æ¨èï¼š** è‡ªå®šä¹‰å¹¶å‘è„šæœ¬
- æ§åˆ¶å¹¶å‘æ•°é‡
- æ·»åŠ é”™è¯¯å¤„ç†
- ä¿å­˜ç»“æœåˆ°æ–‡ä»¶

---

## âš ï¸ **æ³¨æ„äº‹é¡¹**

### 1. Gatewayå’ŒWorkerå¿…é¡»è¿è¡Œ

```
âœ… Gateway: http://127.0.0.1:8000
âœ… Worker: ç›‘å¬Redisé˜Ÿåˆ—
```

### 2. ç³»ç»Ÿèµ„æºé™åˆ¶

**å¹¶å‘æ•°å»ºè®®ï¼š**
- Hunyuan: 5å¹¶å‘ï¼ˆæ— RPMé™åˆ¶ï¼‰
- NVIDIA: 5å¹¶å‘ï¼ˆ40 RPMï¼‰
- Zhipu: 1å¹¶å‘

**æ€»å¹¶å‘æ•°ï¼š** å»ºè®® â‰¤ 10

### 3. é”™è¯¯å¤„ç†

è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†ï¼š
- âœ… Gatewayè¿æ¥å¤±è´¥
- âœ… ä»»åŠ¡æäº¤å¤±è´¥
- âœ… è¶…æ—¶å¤„ç†

### 4. ä»»åŠ¡ç‹¬ç«‹æ€§

å¹¶å‘æäº¤è¦æ±‚ï¼š
- âœ… ä»»åŠ¡ä¹‹é—´æ— ä¾èµ–
- âœ… ä¸éœ€è¦ä¸Šä¸‹æ–‡è®°å¿†
- âœ… å¯ç‹¬ç«‹æ‰§è¡Œ

---

## ğŸ’¡ **é«˜çº§ç”¨æ³•**

### è¯»å–ä»»åŠ¡æ–‡ä»¶

```python
# tasks.txt
ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±
ç¿»è¯‘ï¼š"Hello World"
å†™ä¸€æ®µPythonä»£ç 

# è„šæœ¬
with open('tasks.txt', 'r', encoding='utf-8') as f:
    tasks = [line.strip() for line in f if line.strip()]

submitter.submit_batch(tasks)
```

### ä¿å­˜ç»“æœåˆ°æ–‡ä»¶

```python
import json

results = []

for task_id in task_ids:
    task = submitter.check_task_status(task_id)
    results.append(task)

with open('results.json', 'w', encoding='utf-8') as f:
    json.dump(results, f, ensure_ascii=False, indent=2)
```

---

## ğŸ‰ **æ€»ç»“**

| éœ€æ±‚ | æ¨èæ–¹æ³• |
|------|---------|
| **æ‰‹åŠ¨æ“ä½œ1-2ä¸ªä»»åŠ¡** | GUIç•Œé¢ |
| **æ‰¹é‡è‡ªåŠ¨åŒ–5-10ä¸ªä»»åŠ¡** | batch_submit.py |
| **å¿«é€Ÿå¤„ç†10+ä¸ªä»»åŠ¡** | batch_submit_concurrent.py |
| **è‡ªå®šä¹‰æ‰¹é‡å¤„ç†** | APIè°ƒç”¨ |

---

**ç°åœ¨è¯•è¯•æ‰¹é‡æäº¤å§ï¼**

```bash
cd project_manager_gui

# æ–¹å¼1: ä¸²è¡Œæäº¤
python batch_submit.py

# æ–¹å¼2: å¹¶å‘æäº¤
python batch_submit_concurrent.py
```

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0
**åˆ›å»ºæ—¶é—´ï¼š** 2026-02-16 05:20
**çŠ¶æ€ï¼š** âœ… å¯ç”¨
