# 🔧 服务管理功能使用指南 **版本：** v3.0 **更新时间：** 2026-02-19 --- ## 🎯 功能概述 OpenClaw Control Center v3 新增了**服务管理**功能，可以通过图形界面轻松启动/停止服务： - **Gateway 服务** (端口 8001) - 统一 AI Provider Gateway - **知识库 Web UI** (端口 8501) - 知识库管理系统 --- ## 🚀 使用方法 ### 1. 启动 Control Center ```bash cd project_manager_gui python main_v3.py ``` 或者使用快捷方式（如果已创建）： ```bash python project_manager_gui/main_v3.py ``` ### 2. 切换到「服务管理」标签页 启动后会看到三个标签页： - 📊 **仪表盘** - 系统状态总览 - 🔧 **服务管理** ⭐ - 启动/停止服务 - 📁 **项目管理** - 项目进度管理 ### 3. 启动服务 在「服务管理」标签页： #### **Gateway 服务** - 点击 **"启动"** 按钮 - 状态变为 **● 运行中**（绿色） - 显示访问地址：`ws://127.0.0.1:8001` - 显示 Provider 数量：6 个 #### **知识库 Web UI** - 点击 **"启动"** 按钮 - 状态变为 **● 运行中**（绿色） - 显示访问地址：`http://localhost:8501` - 浏览器自动打开（或手动访问） ### 4. 停止服务 - 点击 **"停止"** 按钮（红色） - 状态变为 **● 已停止**（红色） - 服务立即停止 --- ## 📊 界面说明 ### 服务卡片 每个服务显示： - **服务名称** - 如 "Gateway 服务" - **描述** - 服务功能说明 - **状态指示器** - ● 运行中（绿色）/ ● 已停止（红色） - **访问地址** - WebSocket 或 HTTP URL - **操作按钮** - 启动/停止切换 ### 自动刷新 - **刷新间隔：** 5 秒 - **手动刷新：** 点击 "🔄 刷新状态" 按钮 - **状态检测：** 自动检测端口占用情况 --- ## 🔗 服务详情 ### Gateway 服务 **端口：** 8001 **协议：** WebSocket **地址：** `ws://127.0.0.1:8001` **功能：** - 统一 AI Provider Gateway - 支持 6 个 Provider（zhipu, hunyuan, nvidia1-3, siliconflow） - 自动故障切换 - 流式响应 **配置文件：** `openclaw_async_architecture/API_CONFIG_FINAL.json` ### 知识库 Web UI **端口：** 8501 **协议：** HTTP **地址：** `http://localhost:8501` **功能：** - 知识库管理系统 - 语义搜索（ChromaDB） - 关键词搜索（FTS5） - 文件导入 - 统计信息 **数据目录：** `knowledge_base/data/` --- ## 💡 使用场景 ### 场景 1：开始工作 1. 启动 Control Center (`python main_v3.py`) 2. 切换到「服务管理」标签页 3. 启动 Gateway 服务 4. 启动知识库 Web UI 5. 开始使用 V2 学习系统或知识库 ### 场景 2：使用 V2 学习系统 1. 确保 Gateway 已启动 2. 运行学习脚本： ```bash python v2_mvp_demo.py ``` 3. 学习完成自动保存到知识库 4. 在知识库 Web UI 查看学习结果 ### 场景 3：搜索知识库 1. 确保知识库 Web UI 已启动 2. 浏览器访问：http://localhost:8501 3. 输入关键词搜索 4. 查看语义搜索和关键词搜索结果 --- ## ⚠️ 注意事项 ### 端口占用 - **Gateway：** 8001 - **知识库：** 8501 如果端口被占用，服务启动会失败。请先停止占用端口的程序。 ### 服务依赖 - **知识库 Web UI** 依赖 Streamlit： ```bash pip install streamlit ``` - **Gateway** 依赖 Python 和配置文件 ### 退出 Control Center - 关闭 Control Center **不会**自动停止服务 - 需要手动在「服务管理」标签页停止服务 - 或者在任务管理器中结束相关进程 --- ## 🐛 故障排除 ### 问题 1：服务启动失败 **可能原因：** - 端口被占用 - 配置文件不存在 - Python 环境错误 **解决方法：** 1. 检查端口占用： ```bash netstat -ano | findstr :8001 netstat -ano | findstr :8501 ``` 2. 检查配置文件是否存在 3. 查看详细错误消息 ### 问题 2：状态一直显示"检查中..." **可能原因：** - 后台检测线程阻塞 **解决方法：** 1. 点击 "🔄 刷新状态" 按钮 2. 重启 Control Center ### 问题 3：知识库 Web UI 无法访问 **可能原因：** - Streamlit 未启动成功 - 防火墙阻止 **解决方法：** 1. 检查服务状态是否为"运行中" 2. 手动访问 http://localhost:8501 3. 检查防火墙设置 --- ## 📝 更新日志 ### v3.0 (2026-02-19) - ✅ 新增服务管理功能 - ✅ 添加 Gateway 服务启动/停止 - ✅ 添加知识库 Web UI 启动/停止 - ✅ 自动状态检测（5 秒刷新） - ✅ 图形化操作界面 - ✅ 启动欢迎提示 ### v2.0 (2026-02-19) - ✅ 添加 Dashboard 仪表盘 - ✅ 实时健康检查 - ✅ 项目进度可视化 ### v1.0 (2026-02-16) - ✅ 基础项目管理功能 --- ## 🔗 相关文档 - **V2 MVP 总览：** `workspace/V2_MVP_README.md` - **V2 学习系统：** `v2_learning_system_real/INTEGRATION_GUIDE.md` - **知识库系统：** `knowledge_base/README.md` - **测试报告：** `v2_learning_system_real/TEST_REPORT.md` --- **最后更新：** 2026-02-19 10:15 **作者：** Claw
