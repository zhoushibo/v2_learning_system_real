# OpenClaw Control Center v4.0 - 用户指南

**版本：** v4.0  
**发布日期：** 2026-02-19  
**作者：** Claw  
**适用系统：** Windows 10/11

---

## 📖 目录

1. [简介](#简介)
2. [快速开始](#快速开始)
3. [功能详解](#功能详解)
   - [🚀 快速启动](#-快速启动)
   - [📚 知识库](#-知识库)
   - [🧠 V2 学习](#-v2-学习)
   - [📊 仪表盘](#-仪表盘)
   - [🔍 智能诊断](#-智能诊断)
   - [🔧 服务管理](#-服务管理)
   - [⚙️ 配置编辑器](#️-配置编辑器)
   - [📁 项目管理](#-项目管理)
4. [系统托盘](#系统托盘)
5. [主题切换](#主题切换)
6. [常见问题](#常见问题)
7. [技术支持](#技术支持)

---

## 简介

### 什么是 OpenClaw Control Center？

OpenClaw Control Center 是一个统一的图形化管理控制台，专为 AI 开发环境设计。它集成了服务管理、知识库、学习系统、项目跟踪等功能，让你能够轻松管理整个 AI 开发工作流。

### 核心特性

- ✅ **一键启动** - 自动启动 Gateway 和知识库服务
- ✅ **智能诊断** - 自动检测并修复常见问题
- ✅ **知识管理** - 快速搜索和管理知识库
- ✅ **AI 学习** - 集成 V2 学习系统，自动学习新知识
- ✅ **后台运行** - 系统托盘支持，最小化到托盘
- ✅ **多主题** - 3 套精美主题随意切换
- ✅ **项目管理** - 跟踪 14+ 个项目进度

### 系统要求

- **操作系统：** Windows 10/11
- **Python：** 3.12+
- **依赖：** PyQt5, Streamlit, psutil
- **内存：** 最低 4GB，推荐 8GB+

---

## 快速开始

### 1. 安装依赖

```bash
cd project_manager_gui
pip install -r requirements.txt
```

### 2. 启动程序

```bash
python main_v3.py
```

### 3. 首次使用

1. 程序启动后，默认显示 **快速启动** 标签页
2. 点击 **"🚀 一键启动服务"** 按钮
3. 等待进度条完成（约 5-10 秒）
4. 切换到 **仪表盘** 查看服务状态

### 4. 退出程序

- **方法 1：** 点击窗口右上角关闭按钮
- **方法 2：** 右键系统托盘图标 → 选择 **"❌ 退出"**
- **方法 3：** 最小化到托盘（窗口保持后台运行）

---

## 功能详解

### 🚀 快速启动

**功能说明：** 一键自动启动所有开发环境服务

**使用步骤：**
1. 切换到 **"🚀 快速启动"** 标签页
2. 点击 **"🚀 一键启动服务"** 大按钮
3. 观察进度条和日志输出
4. 等待完成提示

**启动顺序：**
1. Gateway 服务（端口 8001）
2. 知识库 Web UI（端口 8501）

**进度显示：**
- 0-50%：启动 Gateway
- 50-100%：启动知识库
- 100%：所有服务就绪

**状态指示：**
- 🟢 运行中 - 服务正常
- 🔴 未启动 - 服务未运行
- 🟡 启动中 - 正在启动

---

### 📚 知识库

**功能说明：** 快速搜索、导入和管理知识库内容

#### 搜索知识

1. 在搜索框输入关键词（最多 200 字符）
2. 点击 **"🔍 搜索"** 按钮或按回车
3. 等待搜索结果（后台异步执行）
4. 查看结果卡片，包含：
   - 知识内容摘要
   - 相似度百分比
   - 来源文件
   - 创建时间

**搜索技巧：**
- 使用具体关键词，避免过于宽泛
- 支持中文和英文搜索
- 支持技术术语和概念

#### 导入文件

1. 点击 **"📤 导入文件"** 按钮
2. 选择要导入的文件（.txt 或 .md）
3. 点击 **"🌐 打开 Web UI"**
4. 在 Web UI 中完成导入操作

**支持格式：**
- `.txt` - 纯文本文件
- `.md` - Markdown 文件
- 其他文本格式

#### 打开 Web UI

点击 **"🌐 打开 Web UI"** 按钮，自动在浏览器中打开知识库管理界面（http://localhost:8501）

**Web UI 功能：**
- 完整知识库管理
- 批量文件导入
- 知识浏览和编辑
- 统计信息查看

---

### 🧠 V2 学习

**功能说明：** 集成 V2 学习系统，自动学习新知识并保存到知识库

#### 学习配置

**学习主题：**
- 输入要学习的主题（最多 100 字符）
- 示例：`量子力学基础 `、`Python 异步编程`、` 机器学习入门`

**学习模式：**
- ⚡ **快速学习** - 1 个视角，约 10-15 秒
- 🔍 **深度学习** - 3 个视角，约 20-30 秒（推荐）
- 📖 **全面学习** - 5 个视角，约 40-60 秒

**Worker 数量：**
- 范围：1-5 个
- 推荐：3 个（平衡速度和质量）

#### 开始学习

1. 输入学习主题
2. 选择学习模式
3. 调整 Worker 数量
4. 点击 **"🚀 开始学习"**

#### 学习进度

**实时显示：**
- 进度条（0-100%）
- 当前状态文字
- 详细学习日志

**日志颜色：**
- 🔵 蓝色 - 一般信息
- 🟢 绿色 - 成功完成
- 🔴 红色 - 错误信息

#### 学习历史

**显示内容：**
- 学习主题
- 学习模式
- 耗时（秒）
- 知识点数量
- 是否保存到知识库
- 学习时间

**历史记录：**
- 自动保存到本地 JSON 文件
- 最多保存 20 条记录
- 显示最近 10 条

---

### 📊 仪表盘

**功能说明：** 实时监控系统状态和服务健康度

#### 服务状态卡片

每个服务显示：
- 服务名称
- 运行状态（运行中/已停止）
- 端口号
- 进程 ID（PID）
- CPU 和内存使用率
- 快速操作按钮（启动/停止/重启）

#### 系统资源

- CPU 使用率
- 内存使用率
- 磁盘空间
- 网络状态

#### 主题切换

通过菜单栏切换主题：
- **深色主题** - 默认，护眼舒适
- **浅色主题** - 明亮清晰
- **赛博朋克** - 炫酷科技感

---

### 🔍 智能诊断

**功能说明：** 自动检测并修复常见问题

#### 自动检测项目

1. **端口占用检测**
   - 检测 8001 端口（Gateway）
   - 检测 8501 端口（知识库）
   - 显示占用端口的进程

2. **依赖检测**
   - 检查 Streamlit 是否安装
   - 检查 PyQt5 是否安装
   - 检查 psutil 是否安装

3. **配置文件检测**
   - 检查 STATE.json 是否存在
   - 检查 projects.json 格式
   - 验证配置完整性

#### 一键修复

检测到问题后，显示 **"🔧 一键修复"** 按钮：

**修复操作：**
- 停止占用端口的进程
- 安装缺失的依赖
- 修复配置文件格式

**修复日志：**
- 实时显示修复过程
- 成功/失败状态
- 详细错误信息

---

### 🔧 服务管理

**功能说明：** 手动控制各个服务的启动和停止

#### Gateway 服务

**操作：**
- 启动 Gateway（端口 8001）
- 停止 Gateway
- 重启 Gateway
- 查看日志

**状态指示：**
- 🟢 运行中
- 🔴 已停止
- 🟡 启动中/停止中

#### 知识库服务

**操作：**
- 启动知识库 Web UI（端口 8501）
- 停止知识库
- 重启知识库
- 在浏览器中打开

**快速链接：**
- 点击 **"🌐 打开"** 直接在浏览器中访问

---

### ⚙️ 配置编辑器

**功能说明：** 图形化编辑项目配置和系统设置

#### 编辑项目

每个项目卡片显示：
- 项目名称
- 当前状态
- 完成度（0-100%）
- 描述/备注
- 缺失项列表
- 下一步计划

**编辑操作：**
1. 修改完成度（数字输入）
2. 编辑描述（多行文本）
3. 更新缺失项（逗号分隔）
4. 添加下一步计划（每行一条）

#### 添加项目

1. 点击 **"➕ 添加项目"** 按钮
2. 自动创建新项目卡片
3. 编辑项目信息
4. 点击 **"💾 保存更改"**

#### 保存配置

**保存操作：**
1. 点击 **"💾 保存更改"**
2. 自动更新 STATE.json
3. 显示保存成功提示
4. 重新加载显示最新数据

**文件位置：**
- `workspace/STATE.json`
- 自动备份历史版本

#### 重新加载

点击 **"🔄 重新加载"** 从文件重新读取配置，撤销未保存的更改。

---

### 📁 项目管理

**功能说明：** 查看所有项目进度和状态

#### 项目列表

**显示信息：**
- 项目名称
- 完成度百分比
- 状态标签（规划中/进行中/已完成）
- 最后更新时间
- 进度条可视化

#### 排序功能

**排序方式：**
- 按完成度（高→低）
- 按完成度（低→高）
- 按名称（A-Z）
- 按名称（Z-A）
- 按状态

#### 快速操作

**项目操作：**
- 查看项目详情
- 编辑项目配置
- 标记为完成
- 删除项目（需确认）

---

## 系统托盘

### 托盘图标

程序启动后，系统托盘会显示橙色 **"O"** 图标。

### 托盘菜单

**右键点击托盘图标：**

- 🖥️ **显示主窗口** - 恢复窗口显示
- 🚀 **快速启动服务** - 一键启动所有服务
- ⏹️ **停止所有服务** - 停止所有运行中的服务
- 📚 **打开知识库** - 在浏览器中打开知识库
- 🧠 **打开 V2 学习** - 切换到 V2 学习面板
- 📥 **最小化到托盘** - 隐藏窗口到托盘
- 📤 **从托盘恢复** - 恢复窗口显示
- ❌ **退出** - 完全退出程序

### 自动最小化

**触发条件：**
- 点击窗口最小化按钮
- 关闭窗口时选择"最小化到托盘"

**恢复方法：**
- 双击托盘图标
- 右键托盘 → 选择"显示主窗口"

### 托盘通知

**通知类型：**
- 服务启动成功
- 服务停止成功
- 错误提示
- 操作确认

**通知时长：** 2 秒后自动消失

---

## 主题切换

### 可用主题

#### 1. 深色主题（默认）

**特点：**
- 深灰色背景
- 白色文字
- 蓝色强调色
- 护眼舒适

**适用场景：** 日常使用、长时间工作

#### 2. 浅色主题

**特点：**
- 白色背景
- 深色文字
- 明亮清晰
- 专业简洁

**适用场景：** 明亮环境、演示展示

#### 3. 赛博朋克主题

**特点：**
- 深色背景
- 霓虹色彩
- 橙色/紫色强调
- 科技感强

**适用场景：** 个性化、夜间使用

### 切换方法

**方法 1：菜单栏**
1. 点击菜单栏 **"主题"**
2. 选择要切换的主题
3. 立即生效

**方法 2：快捷键**
- `Ctrl+1` - 深色主题
- `Ctrl+2` - 浅色主题
- `Ctrl+3` - 赛博朋克主题

---

## 常见问题

### Q1: 程序无法启动

**可能原因：**
- Python 版本过低
- 依赖未安装
- 端口被占用

**解决方案：**
1. 检查 Python 版本（需要 3.12+）
2. 运行 `pip install -r requirements.txt`
3. 使用智能诊断功能检测问题

---

### Q2: 服务启动失败

**可能原因：**
- 端口已被占用
- 防火墙阻止
- 依赖服务未运行

**解决方案：**
1. 切换到 **"🔍 智能诊断"** 标签页
2. 点击 **"🔍 开始诊断"**
3. 点击 **"🔧 一键修复"**

---

### Q3: 知识库搜索无结果

**可能原因：**
- 知识库为空
- 搜索关键词不匹配
- 知识库服务未启动

**解决方案：**
1. 检查知识库服务是否运行
2. 导入一些文件到知识库
3. 尝试其他关键词

---

### Q4: V2 学习失败

**可能原因：**
- V2 学习系统目录不存在
- API Key 配置缺失
- 网络连接问题

**解决方案：**
1. 检查 `workspace/v2_learning_system_real` 目录
2. 配置 API Key（参考 INTEGRATION_GUIDE.md）
3. 检查网络连接

---

### Q5: 系统托盘图标不显示

**可能原因：**
- 系统托盘被隐藏
- Windows 设置问题
- 程序未正确启动

**解决方案：**
1. 检查 Windows 系统托盘设置
2. 重启程序
3. 查看任务管理器确认进程运行

---

### Q6: 主题切换无效

**可能原因：**
- 主题文件损坏
- PyQt5 版本问题

**解决方案：**
1. 重启程序
2. 重新安装 PyQt5
3. 检查 `gui/themes.py` 文件完整性

---

## 技术支持

### 文档资源

- **用户指南：** `USER_GUIDE.md`（本文档）
- **README：** `README.md`
- **更新日志：** `CHANGELOG.md`
- **开发文档：** `docs/` 目录

### 在线资源

- **GitHub 仓库：** [https://github.com/zhoushibo/project_manager_gui](https://github.com/zhoushibo/project_manager_gui)
- **问题反馈：** GitHub Issues
- **讨论区：** GitHub Discussions

### 联系方式

- **开发者：** Claw
- **项目：** OpenClaw Control Center
- **版本：** v4.0

### 贡献指南

欢迎贡献代码、报告问题或提出建议！

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

---

## 附录

### A. 快捷键列表

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+Q` | 退出程序 |
| `Ctrl+1` | 切换到深色主题 |
| `Ctrl+2` | 切换到浅色主题 |
| `Ctrl+3` | 切换到赛博朋克主题 |
| `F5` | 刷新当前标签页 |
| `Ctrl+T` | 切换到下一个标签页 |
| `Ctrl+Shift+T` | 切换到上一个标签页 |

### B. 端口列表

| 服务 | 端口 | 协议 |
|------|------|------|
| Gateway | 8001 | WebSocket |
| 知识库 Web UI | 8501 | HTTP |

### C. 文件结构

```
project_manager_gui/
├── main_v3.py              # 主入口
├── gui/                    # GUI 组件
│   ├── main_window_v3.py   # 主窗口
│   ├── quick_start.py      # 快速启动
│   ├── knowledge_base_panel.py  # 知识库
│   ├── v2_learning_panel.py     # V2 学习
│   ├── system_tray.py      # 系统托盘
│   ├── config_editor.py    # 配置编辑器
│   ├── diagnostic_panel.py # 智能诊断
│   ├── themes.py           # 主题管理
│   ├── dashboard.py        # 仪表盘
│   ├── service_manager.py  # 服务管理
│   └── project_list.py     # 项目管理
├── services/               # 服务组件
│   ├── gateway_service.py
│   ├── knowledge_base_service.py
│   └── diagnostic.py
├── test_all_features.py    # 综合测试
└── USER_GUIDE.md          # 用户指南
```

### D. 版本历史

**v4.0 (2026-02-19)**
- ✅ P0 核心功能完成（6/6）
- ✅ P1 增强功能完成（4/4）
- ✅ 系统托盘集成
- ✅ 配置编辑器
- ✅ V2 学习系统集成
- ✅ 知识库快速访问

**v3.2 (2026-02-18)**
- 知识库快速访问
- 智能诊断优化

**v3.0 (2026-02-17)**
- 初始版本
- 基础服务管理

---

**© 2026 OpenClaw Control Center. All rights reserved.**

**最后更新：** 2026-02-19 13:30
