# 托盘图标说明

---

## 🔔 **关于右下角托盘**

### 托盘图标的含义

**托盘图标 = 系统通知区域图标**
- 位置：Windows任务栏右下角（时钟旁边）
- 功能：最小化程序到后台
- 优点：不占用任务栏空间

---

## 👁️ **如何找到托盘图标**

### Windows 10/11

#### 方法1: 默认显示
托盘图标默认在任务栏右侧，时钟旁边。

#### 方法2: 展开图标
如果看不到：
1. 点击任务栏右下角的 **^** 箭头图标
2. 查看展开的图标列表
3. 应该能看到OpenClaw的托盘图标

#### 方法3: 自定义设置
1. 右键点击任务栏 → 任务栏设置
2. 滚动到"通知区域"
3. 点击"选择哪些图标显示在任务栏上"
4. 找到"OpenClaw项目管理器"
5. 设置为"显示"

---

## 🎯 **托盘图标功能**

### 右键菜单
```
┌─────────────────┐
│ 显示窗口         │
├─────────────────┤
│ 退出             │
└─────────────────┘
```

### 操作方式

#### 显示窗口
- **右键** → "显示窗口"
- 程序窗口恢复显示

#### 退出程序
- **右键** → "退出"
- 程序完全关闭
- 所有进程停止

---

## ⚠️ **当前状态**

### 图标文件缺失

**日志信息：**
```
QSystemTrayIcon::setVisible: No Icon set
```

**说明：**
- 托盘图标对象已创建
- 但没有设置图标文件（.ico文件）
- 显示为空白或默认图标

**影响：**
- ✅ 功能正常
- ✅ 右键菜单可用
- ⚠️  视觉上不美观
- ⚠️  不易发现

---

## 🎨 **如何添加图标**

### Step 1: 准备图标文件
创建或找到图标文件：
- 格式：.ico
- 大小：16x16 或 32x32 或 48x48
- 位置：`resources/icons/app_icon.ico`

### Step 2: 修改代码

编辑 `gui/tray_icon.py`：

```python
def __init__(self, parent=None):
    super().__init__(parent)

    # 设置图标
    icon_path = os.path.join(os.path.dirname(__file__), "..", "resources", "icons", "app_icon.ico")
    if os.path.exists(icon_path):
        self.setIcon(QIcon(icon_path))
    else:
        # 没有图标文件时的处理
        self.setIcon(QIcon())  # 空图标

    self.setToolTip("OpenClaw项目管理器")
    self._create_menu()
```

### Step 3: 添加图标文件
将图标文件复制到：
```
project_manager_gui/resources/icons/app_icon.ico
```

---

## 🖼️ **创建图标文件**

### 方法1: 转换PNG到ICO
使用在线工具转换：
- https://www.aconvert.com/cn/image/png-to-ico/
- 上传PNG图片
- 下载ICO文件

### 方法2: 使用Paint.NET
1. 打开图片
2. 选择"另存为" → ICO
3. 保存

### 方法3: 使用ImageMagick
```bash
convert input.png output.ico
```

---

## 📋 **常见问题**

### Q1: 找不到托盘图标
**A:** 检查以下几点：
1. 点击任务栏的 ^ 箭头展开图标
2. 检查任务栏设置中的"通知区域"
3. 确认程序正在运行（查看进程管理器）

### Q2: 右键菜单不显示
**A:**
1. 确认程序正在运行
2. 尝试重新启动程序
3. 检查是否有其他程序覆盖了托盘

### Q3: 退出程序后托盘还在
**A:**
1. 检查进程管理器（任务管理器 → 进程）
2. 确认python.exe进程已关闭
3. 如果还在，手动结束进程

---

## 🔧 **测试托盘图标**

### 使用测试脚本

```bash
python test_tray_icon.py
```

**效果：**
- 显示一个消息框
- 托盘图标显示在右下角
- 确认可以看到托盘图标

---

## 💡 **建议**

### 短期
- [ ] 接受当前的空白图标（功能正常）
- [ ] 或找一个简单的图标文件

### 长期
- [ ] 设计专门的OpenClaw标识
- [ ] 创建专业的图标
- [ ] 调整尺寸适配不同分辨率

---

**文档版本：** v1.0
**最后更新：** 2026-02-16 05:10
**状态：** 功能正常，图标可选
